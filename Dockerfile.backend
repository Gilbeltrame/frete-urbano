# Backend Dockerfile
FROM node:20-alpine AS base
WORKDIR /app

# Instala dependências (aproveita cache)
COPY backend/package.json ./backend/package.json
WORKDIR /app/backend
RUN npm install --production

# Copia código fonte
COPY backend/ .

# Porta exposta
EXPOSE 3000
ENV NODE_ENV=production
CMD ["node", "server.mjs"]
